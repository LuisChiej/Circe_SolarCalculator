<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Orbitron&display=swap" rel="stylesheet">
	<!-- Latest compiled and minified CSS -->
	 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	 <!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
		integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
		crossorigin="anonymous"></script>
	<title>Circe Solar Calculator</title>
	<meta name="description" content="FAQ page for Circe Solar Calculator">
	<link href='./main.css' rel='stylesheet' type="text/css">
	<link rel='manifest' href='./manifest.json'>
	<link rel="apple-touch-icon" href="./logo.png">
    <meta name="theme-color" content="#011B33">
    <link rel="icon"  href="./logo.png">
</head>

<body id="faq-page">
	<main>
		<h1 id="logo">CIRCE</h1>
		<div class="text-center">
			<h1>Frequently Asked Questions</h1>
		</div>
		<div id="faq-container" class="container-fluid"></div>
	</main>
	<footer class="container-fluid">
		<p>Â© 2019 Circe HNG . All rights reserved.</p>
	</footer>
</body>
<script src="app.js" type="text/javascript"></script>
<script>
	const getData = () =>{
		//Fetch data from, for now a json
		//Then using promise to complete other actions
		fetch('/data/faq.json')
		  .then(res=>res.json())
		  .then(getFaqs)
		  .then(()=>{btnListener()})
		  .catch(err=> console.log(err));
	}

	const getFaqs = (data) =>{
		const faqs = data.faq;
		// console.log('faqs', faqs);
		makeFaqHTML(faqs);
	}

	const makeFaqHTML = (faqs) =>{
		const divFaq = document.querySelector('div#faq-container');
		const frag = document.createDocumentFragment(); //savin some performance cost with Fragment
		faqs.forEach(faq => {
			//Create Elements
			const div = document.createElement("div");
			const divAccText = document.createElement("div");
			const button = document.createElement("button");
			const p = document.createElement("p");
			const spanText = document.createElement("span");
			const spanIcon = document.createElement("span");

			//Adding classes
			div.classList.add('accordion-item');
			button.classList.add('accordion-item-title');
			p.classList.add('accordion-item-text');
			divAccText.classList.add('accordion-item-text-container');
			spanIcon.classList.add('btn-icon');
			spanText.classList.add('btn-text');

			spanText.innerHTML = faq.title;
			spanIcon.innerHTML = "+";
			p.innerHTML = faq.text;

			button.append(spanText);
			button.append(spanIcon);

			divAccText.append(p);

			div.append(button);
			div.append(divAccText);

			frag.append(div);
		});

		//Now append to FAQ div
		divFaq.append(frag);
	}

	const btnListener = () =>{
		$("button.accordion-item-title").click(function(){
			// ES6 class doesnt work with jQ
			// console.log($(this));
			
			$(this).next().toggle("slow");
			if($(this).children(".btn-icon").text() == "+"){
				$(this).children(".btn-icon").html("-");
			}else{
				$(this).children(".btn-icon").html("+");
			}
		})
	}

	document.addEventListener("DOMContentLoaded", () =>{
		getData();
	});
</script>
</html>